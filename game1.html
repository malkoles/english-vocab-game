<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Vocab Challenge</title>
<style>
    /* --- È†ÅÈù¢Âü∫Á§éÊ®£Âºè --- */
    body {
        font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
        background-color: #f0f8ff;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        position: relative;
        padding-bottom: 50px; 
        box-sizing: border-box;
    }

    /* --- Âõû‰∏ªÈ†ÅÊåâÈàïÊ®£Âºè --- */
    .home-btn {
        position: absolute;
        top: 15px;
        left: 15px;
        background-color: white;
        color: #2c3e50;
        border: 2px solid #bdc3c7;
        padding: 8px 15px;
        border-radius: 20px;
        text-decoration: none;
        font-size: 14px;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: all 0.2s;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .home-btn:hover {
        background-color: #ecf0f1;
        transform: translateY(-2px);
    }

    /* --- ÈÅäÊà≤‰∏ªÂÆπÂô®Ê®£Âºè --- */
    .container {
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
        width: 90%;
        max-width: 600px;
        text-align: center;
        margin-top: 50px;
        margin-bottom: 20px;
    }

    /* --- Footer Ê®£Âºè --- */
    .footer {
        position: absolute;
        bottom: 15px;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 13px;
        color: #95a5a6;
    }

    /* --- ÈÄöÁî®ÂÖÉ‰ª∂Ê®£Âºè --- */
    h1 { color: #2c3e50; font-size: 28px; }
    .btn {
        background-color: #3498db; /* Ëã±ÊñáÁßëÁî®ËóçËâ≤ */
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        margin: 10px;
        transition: background-color 0.3s;
    }
    .btn:hover { background-color: #2980b9; }
    
    /* --- ÈÅ∏È†ÖÊåâÈàïÊ®£Âºè --- */
    .option-btn {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 15px;
        background-color: #ecf0f1;
        color: #2c3e50;
        border: 2px solid #bdc3c7;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
        text-align: left;
        transition: all 0.2s;
    }
    .option-btn:hover { background-color: #d5dbdb; }
    .option-btn.correct { background-color: #2ecc71; border-color: #27ae60; color: white; }
    .option-btn.wrong { background-color: #e74c3c; border-color: #c0392b; color: white; }
    
    /* --- ÂäüËÉΩÊÄßÊ®£Âºè --- */
    .hidden { display: none; }
    
    /* --- Ë®≠ÂÆöÈ†ÅÈù¢Ê®£Âºè --- */
    .settings-group { margin-bottom: 20px; text-align: left; }
    .settings-group h3 { margin-bottom: 10px; border-bottom: 2px solid #eee; padding-bottom: 5px;}
    
    .checkbox-container {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
    }

    .checkbox-label, .radio-label {
        display: flex;
        align-items: center;
        margin-bottom: 5px;
        font-size: 16px;
        cursor: pointer;
    }
    
    .checkbox-label input { margin-right: 8px; }

    /* --- ÈÅäÊà≤ÈÄ≤Ë°å‰∏≠Ê®£Âºè --- */
    #question-text { font-size: 32px; font-weight: bold; color: #2c3e50; margin: 20px 0; min-height: 60px;}
    #score-display { font-size: 24px; margin-bottom: 20px; font-weight: bold; color: #e67e22; }
    #progress { font-size: 14px; color: #7f8c8d; margin-bottom: 10px; }
    #final-message { font-size: 20px; margin-bottom: 20px; line-height: 1.6;}

    /* --- ÈåØÈ°åÂàóË°®Ê®£Âºè --- */
    .mistake-container {
        margin-top: 20px;
        text-align: left;
        background-color: #fff0f0;
        border: 1px solid #ffcccc;
        border-radius: 10px;
        padding: 15px;
        max-height: 300px;
        overflow-y: auto;
    }
    .mistake-title {
        color: #c0392b;
        font-weight: bold;
        margin-bottom: 10px;
        border-bottom: 1px solid #ffcccc;
        padding-bottom: 5px;
    }
    .mistake-item {
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px dashed #eee;
    }
    .mistake-item:last-child { border-bottom: none; }
    .m-word { font-size: 18px; font-weight: bold; color: #2c3e50; }
    .m-wrong { color: #e74c3c; font-size: 14px; margin-top: 2px; }
    .m-correct { color: #27ae60; font-size: 14px; font-weight: bold; margin-top: 2px; }

</style>
</head>
<body>

<a href="index.html" class="home-btn">üè† Home</a>

<div class="container" id="game-container">
    <div id="start-screen">
        <h1>English Vocab Challenge</h1>
        
        <div class="settings-group">
            <h3>Select Section (ÂèØÂ§öÈÅ∏)</h3>
            <div class="checkbox-container">
                <label class="checkbox-label"><input type="checkbox" name="section" value="1" checked> Section 1</label>
                <label class="checkbox-label"><input type="checkbox" name="section" value="2" checked> Section 2</label>
                <label class="checkbox-label"><input type="checkbox" name="section" value="3" checked> Section 3</label>
            </div>
        </div>

        <div class="settings-group">
            <h3>Questions</h3>
            <label class="radio-label"><input type="radio" name="qCount" value="15"> 15 È°å</label>
            <label class="radio-label"><input type="radio" name="qCount" value="20" checked> 20 È°å</label>
            <label class="radio-label"><input type="radio" name="qCount" value="30"> 30 È°å</label>
            <label class="radio-label"><input type="radio" name="qCount" value="50"> 50 È°å</label>
            <label class="radio-label"><input type="radio" name="qCount" value="80"> 80 È°å</label>
        </div>

        <button class="btn" onclick="startGame()">Start Game</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="progress">È°åÁõÆ: 1 / 20</div>
        <div id="question-text">Word</div>
        <div id="options-container"></div>
    </div>

    <div id="result-screen" class="hidden">
        <h1>Ê∏¨È©óÁµêÊùü!</h1>
        <div id="score-display">ÂæóÂàÜ: 0 / 0</div>
        <div id="final-message"></div>
        <div id="mistake-area"></div>
        <button class="btn" onclick="location.reload()">Replay ÈáçÁé©</button>
    </div>
</div>

<div class="footer">Designed by KLÊÄùËÄÉÁ†îÁ©∂ÂÆ§</div>

<script>
    const vocabData = [
        { s: 1, w: "balance", m: "Âπ≥Ë°°" },
        { s: 1, w: "bend", m: "ÂΩéÊõ≤ / ‰øØË∫´" },
        { s: 1, w: "choke", m: "ÂìΩÂíΩ / Á™íÊÅØ / ÂóÜÂà∞" },
        { s: 1, w: "gesture", m: "ÂÅöÊâãÂã¢ / ÊâãÂã¢" },
        { s: 1, w: "hold your breath", m: "Â±è‰ΩèÂëºÂê∏ / ÂøçÊ∞£" },
        { s: 1, w: "lean", m: "ÂÄöÈù† / ÂÇæÊñú" },
        { s: 1, w: "nod", m: "ÈªûÈ†≠" },
        { s: 1, w: "pinch", m: "Êçè / Êéê" },
        { s: 1, w: "point", m: "Êåá / ÊåáÂêë" },
        { s: 1, w: "punch", m: "ÊèÆÊã≥ / ÈáçÊìä" },
        { s: 1, w: "snore", m: "ÊâìÈºªÈºæ" },
        { s: 1, w: "stretch", m: "‰º∏Â±ï / ‰º∏Êá∂ËÖ∞" },
        { s: 1, w: "swallow", m: "ÂêûÂö•" },
        { s: 1, w: "twist", m: "Êâ≠Âãï / Êâ≠ÂÇ∑" },
        { s: 1, w: "wander", m: "ÂæòÂæä / ÈñíÈÄõ" },
        { s: 2, w: "bark", m: "Âê†Âè´ / Âé≤ËÅ≤ÂñäÂè´" },
        { s: 2, w: "beg", m: "‰πûÊ±Ç / ÊááÊ±Ç" },
        { s: 2, w: "cheer", m: "Ê≠°Âëº" },
        { s: 2, w: "clap", m: "ÊãçÊâã / ÈºìÊéå" },
        { s: 2, w: "fidget", m: "ÂùêÁ´ã‰∏çÂÆâ / ÁÖ©Ë∫Å" },
        { s: 2, w: "frown", m: "Áö∫Áúâ" },
        { s: 2, w: "laugh", m: "Á¨ë / Â§ßÁ¨ë" },
        { s: 2, w: "roar", m: "ÂíÜÂìÆ / ÂêºÂè´" },
        { s: 2, w: "scream", m: "Â∞ñÂè´" },
        { s: 2, w: "shake your head", m: "ÊêñÈ†≠" },
        { s: 2, w: "shout", m: "Â§ßÂè´ / ÂëºÂñù" },
        { s: 2, w: "sigh", m: "ÂòÜÊ∞£" },
        { s: 2, w: "sob", m: "ÂïúÊ≥£ / ÂóöÂíΩ" },
        { s: 2, w: "whoop", m: "È´òÂñä (Ê≠°Âëº)" },
        { s: 2, w: "yell", m: "Âè´Âñä / ÂêºÂè´" },
        { s: 3, w: "annoyed", m: "ÊÉ±ÊÄíÁöÑ / ÁîüÊ∞£ÁöÑ" },
        { s: 3, w: "guilty", m: "ÂÖßÁñöÁöÑ / ÊúâÁΩ™ÁöÑ" },
        { s: 3, w: "calm", m: "Âπ≥ÈùúÁöÑ / ÂÜ∑ÈùúÁöÑ" },
        { s: 3, w: "confident", m: "Ëá™‰ø°ÁöÑ" },
        { s: 3, w: "confused", m: "Âõ∞ÊÉëÁöÑ" },
        { s: 3, w: "contented", m: "ÊªøË∂≥ÁöÑ / ÊªøÊÑèÁöÑ" },
        { s: 3, w: "curious", m: "Â•ΩÂ•áÁöÑ" },
        { s: 3, w: "depressed", m: "Ê≤ÆÂñ™ÁöÑ / ÊäëÈ¨±ÁöÑ" },
        { s: 3, w: "disappointed", m: "Â§±ÊúõÁöÑ" },
        { s: 3, w: "embarrassed", m: "Â∞∑Â∞¨ÁöÑ" },
        { s: 3, w: "fearful", m: "ÊÅêÊáºÁöÑ / ÂÆ≥ÊÄïÁöÑ" },
        { s: 3, w: "grateful", m: "ÊÑüÊøÄÁöÑ" },
        { s: 3, w: "hopeful", m: "ÂÖÖÊªøÂ∏åÊúõÁöÑ" },
        { s: 3, w: "jealous", m: "Â´âÂ¶íÁöÑ" },
        { s: 3, w: "jolly", m: "Âø´Ê¥ªÁöÑ / È´òËààÁöÑ" },
        { s: 3, w: "joyful", m: "Âø´Ê®ÇÁöÑ" },
        { s: 3, w: "negative", m: "Ë≤†Èù¢ÁöÑ / Ê∂àÊ•µÁöÑ" },
        { s: 3, w: "nervous", m: "Á∑äÂºµÁöÑ" },
        { s: 3, w: "pride", m: "Ëá™Ë±™ / È©ïÂÇ≤" },
        { s: 3, w: "relaxed", m: "ÊîæÈ¨ÜÁöÑ" },
        { s: 3, w: "relieved", m: "ÈáãÊá∑ÁöÑ / È¨Ü‰∫Ü‰∏ÄÂè£Ê∞£ÁöÑ" },
        { s: 3, w: "smiley", m: "Á¨ëÂòªÂòªÁöÑ / ÂæÆÁ¨ëÁöÑ" },
        { s: 3, w: "stressed", m: "ÊÑüÂà∞ÊúâÂ£ìÂäõÁöÑ / Á∑äÂºµÁöÑ" },
        { s: 3, w: "unsettled", m: "‰∏çÂÆâÁöÑ / Êú™ÂÆöÁöÑ" },
        { s: 3, w: "upset", m: "ÂøÉÁÖ©ÊÑè‰∫ÇÁöÑ / Èõ£ÈÅéÁöÑ" },
        { s: 3, w: "worried", m: "ÊìîÂøÉÁöÑ" },
        { s: 3, w: "burst out", m: "Á™ÅÁÑ∂ÁôºÁîü / Á™ÅÁÑ∂ÁàÜÁôº (ÊÉÖÁ∑í)" },
        { s: 3, w: "cheer up", m: "ÊåØ‰ΩúËµ∑‰æÜ / ‰ΩøÈ´òËàà" },
        { s: 3, w: "distract", m: "ÂàÜÂøÉ / ËΩâÁßªÊ≥®ÊÑèÂäõ" },
        { s: 3, w: "hold back", m: "ÊäëÂà∂ / ÈòªÊìã" },
        { s: 3, w: "rant and rave", m: "ÂíÜÂìÆ / Â§ßÁôºÈõ∑ÈúÜ" },
        { s: 3, w: "release", m: "ÈáãÊîæ / ÁôºÊ¥©" },
        { s: 3, w: "roll your eyes", m: "ÁøªÁôΩÁúº" },
        { s: 3, w: "shiver", m: "È°´Êäñ / ÂìÜÂó¶" },
        { s: 3, w: "shrug", m: "ËÅ≥ËÇ©" },
        { s: 3, w: "suppress", m: "Â£ìÊäë / ÈéÆÂ£ì" },
        { s: 3, w: "at ease", m: "Ëá™Âú® / ‰∏çÊãòÊùü" },
        { s: 3, w: "despair", m: "ÁµïÊúõ" },
        { s: 3, w: "discouragement", m: "Ê∞£È§í / Êå´Êäò" },
        { s: 3, w: "disgusted", m: "ÊÑüÂà∞ÂôÅÂøÉÁöÑ / Âé≠ÊÉ°ÁöÑ" },
        { s: 3, w: "eager", m: "Ê∏¥ÊúõÁöÑ / ÁÜ±ÂàáÁöÑ" },
        { s: 3, w: "ecstatic", m: "Ê¨£ÂñúËã•ÁãÇÁöÑ" },
        { s: 3, w: "effusive", m: "ÊÑüÊÉÖÊ©´Ê∫¢ÁöÑ / ÈÅéÂàÜÁÜ±ÊÉÖÁöÑ" },
        { s: 3, w: "enthusiastic", m: "ÁÜ±ÊÉÖÁöÑ / ÁÜ±ÂøÉÁöÑ" },
        { s: 3, w: "frustrated", m: "ÊÑüÂà∞Êå´ÊïóÁöÑ / ÁÅ∞ÂøÉÁöÑ" },
        { s: 3, w: "hostile", m: "ÊïµÂ∞çÁöÑ / Êá∑ÊúâÊïµÊÑèÁöÑ" },
        { s: 3, w: "irritated", m: "Ë¢´ÊøÄÊÄíÁöÑ / ÊÉ±ÁÅ´ÁöÑ" },
        { s: 3, w: "pessimistic", m: "ÊÇ≤ËßÄÁöÑ" },
        { s: 3, w: "suspicious", m: "Â§öÁñëÁöÑ / ÂèØÁñëÁöÑ" },
        { s: 3, w: "terror", m: "ÊÅêÊáº / È©öÈß≠" }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let isAnswering = false;
    let wrongAnswers = [];

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startGame() {
        try {
            wrongAnswers = [];
            const checkboxes = document.querySelectorAll('input[name="section"]:checked');
            let selectedSections = [];
            checkboxes.forEach((cb) => selectedSections.push(parseInt(cb.value)));

            if (selectedSections.length === 0) {
                alert("Please select at least one Section!");
                return;
            }

            let pool = vocabData.filter(item => selectedSections.includes(item.s));
            const qCountInput = document.querySelector('input[name="qCount"]:checked');
            let maxQ = parseInt(qCountInput.value);

            if (pool.length === 0) {
                alert("No data found for selected sections!");
                return;
            }

            if (pool.length < maxQ) maxQ = pool.length;

            shuffle(pool);
            currentQuestions = pool.slice(0, maxQ);
            currentIndex = 0;
            score = 0;

            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('mistake-area').innerHTML = '';
            
            showQuestion();
        } catch (e) {
            console.error("Error:", e);
            alert("An error occurred. Please check code.");
        }
    }

    function showQuestion() {
        isAnswering = true;
        const qData = currentQuestions[currentIndex];
        
        document.getElementById('progress').innerText = `Question: ${currentIndex + 1} / ${currentQuestions.length}`;
        document.getElementById('question-text').innerText = qData.w;

        let options = [{ text: qData.m, correct: true }];
        let distractors = vocabData.filter(v => v.m !== qData.m);
        shuffle(distractors);
        for(let i=0; i<3; i++) {
            if(distractors[i]) options.push({ text: distractors[i].m, correct: false });
        }
        
        shuffle(options);
        const container = document.getElementById('options-container');
        container.innerHTML = ''; 
        
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt.text;
            btn.onclick = () => checkAnswer(btn, opt.correct, qData);
            container.appendChild(btn);
        });
    }

    function checkAnswer(btn, isCorrect, qData) {
        if (!isAnswering) return;
        isAnswering = false;
        const allBtns = document.querySelectorAll('.option-btn');
        
        if (isCorrect) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('wrong');
            wrongAnswers.push({ word: qData.w, wrong: btn.innerText, correct: qData.m });
            allBtns.forEach(b => {
                if (b.innerText === qData.m) b.classList.add('correct');
            });
        }

        setTimeout(() => {
            currentIndex++;
            if (currentIndex < currentQuestions.length) showQuestion();
            else endGame();
        }, 1500);
    }

    function endGame() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        
        const percentage = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('score-display').innerText = `Score: ${score} / ${currentQuestions.length} (${percentage}%)`;
        
        let msg = "";
        if (percentage === 100) msg = "Perfect! üéâ";
        else if (percentage >= 80) msg = "Great Job! üëç";
        else if (percentage >= 60) msg = "Good Effort! üí™";
        else msg = "Keep Practicing! üìö";
        document.getElementById('final-message').innerText = msg;

        const mistakeArea = document.getElementById('mistake-area');
        if (wrongAnswers.length > 0) {
            let html = '<div class="mistake-container"><div class="mistake-title">Review Mistakes</div>';
            wrongAnswers.forEach(item => {
                html += `<div class="mistake-item">
                        <div class="m-word">${item.word}</div>
                        <div class="m-wrong">‚ùå ${item.wrong}</div>
                        <div class="m-correct">‚úÖ ${item.correct}</div>
                    </div>`;
            });
            html += '</div>';
            mistakeArea.innerHTML = html;
        }
    }
</script>

</body>
</html>

