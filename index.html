<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¸­ä¸€è‹±æ–‡å–®å­—æ¸¬é©—</title>
<style>
    /* --- é é¢åŸºç¤æ¨£å¼ --- */
    body {
        font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
        background-color: #f0f8ff;
        /* ä½¿ç”¨ Flexbox è®“å…§å®¹å‚ç›´ç½®ä¸­ */
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh; /* ç¢ºä¿æœ€å°é«˜åº¦ç‚ºè¦–çª—é«˜åº¦ */
        margin: 0;
        /* ç‚º Footer é ç•™ç©ºé–“çš„è¨­å®š */
        position: relative;
        padding-bottom: 50px; 
        box-sizing: border-box;
    }

    /* --- éŠæˆ²ä¸»å®¹å™¨æ¨£å¼ --- */
    .container {
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
        width: 90%;
        max-width: 600px;
        text-align: center;
        /* ç¢ºä¿åœ¨å°è¢å¹•ä¸Šä¸æœƒè²¼åˆ°é ‚éƒ¨ */
        margin-top: 20px;
        margin-bottom: 20px;
    }

    /* --- Footer æ¨£å¼ (æ–°å¢) --- */
    .footer {
        position: absolute;
        bottom: 15px;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 13px;
        color: #95a5a6; /* æ·ºç°è‰²çœ‹èµ·ä¾†æ¯”è¼ƒå°ˆæ¥­ */
    }

    /* --- é€šç”¨å…ƒä»¶æ¨£å¼ --- */
    h1 { color: #2c3e50; }
    .btn {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 12px 24px;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        margin: 10px;
        transition: background-color 0.3s;
    }
    .btn:hover { background-color: #2980b9; }
    
    /* --- é¸é …æŒ‰éˆ•æ¨£å¼ --- */
    .option-btn {
        display: block;
        width: 100%;
        margin: 10px 0;
        padding: 15px;
        background-color: #ecf0f1;
        color: #2c3e50;
        border: 2px solid #bdc3c7;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
        text-align: left;
        transition: all 0.2s;
    }
    .option-btn:hover { background-color: #d5dbdb; }
    .option-btn.correct { background-color: #2ecc71; border-color: #27ae60; color: white; }
    .option-btn.wrong { background-color: #e74c3c; border-color: #c0392b; color: white; }
    
    /* --- åŠŸèƒ½æ€§æ¨£å¼ --- */
    .hidden { display: none; }
    
    /* --- è¨­å®šé é¢æ¨£å¼ --- */
    .settings-group { margin-bottom: 20px; text-align: left; }
    .settings-group h3 { margin-bottom: 10px; border-bottom: 2px solid #eee; padding-bottom: 5px;}
    .checkbox-label, .radio-label {
        display: inline-block;
        margin-right: 15px;
        margin-bottom: 10px;
        font-size: 16px;
        cursor: pointer;
    }
    
    /* --- éŠæˆ²é€²è¡Œä¸­æ¨£å¼ --- */
    #question-text { font-size: 32px; font-weight: bold; color: #2c3e50; margin: 20px 0; }
    #score-display { font-size: 24px; margin-bottom: 20px; font-weight: bold; color: #e67e22; }
    #progress { font-size: 14px; color: #7f8c8d; margin-bottom: 10px; }
    #final-message { font-size: 20px; margin-bottom: 20px; line-height: 1.6;}
</style>
</head>
<body>

<div class="container" id="game-container">
    <div id="start-screen">
        <h1>è‹±æ–‡å–®å­—æŒ‘æˆ°</h1>
        
        <div class="settings-group">
            <h3>é¸æ“‡ Section (å¯å¤šé¸)</h3>
            <label class="checkbox-label"><input type="checkbox" name="section" value="1" checked> Section 1</label>
            <label class="checkbox-label"><input type="checkbox" name="section" value="2" checked> Section 2</label>
            <label class="checkbox-label"><input type="checkbox" name="section" value="3" checked> Section 3</label>
        </div>

        <div class="settings-group">
            <h3>é¡Œç›®æ•¸é‡</h3>
            <label class="radio-label"><input type="radio" name="qCount" value="15"> 15 é¡Œ</label>
            <label class="radio-label"><input type="radio" name="qCount" value="20" checked> 20 é¡Œ</label>
            <label class="radio-label"><input type="radio" name="qCount" value="30"> 30 é¡Œ</label>
            <label class="radio-label"><input type="radio" name="qCount" value="50"> 50 é¡Œ</label>
            <label class="radio-label"><input type="radio" name="qCount" value="80"> 80 é¡Œ</label>
        </div>

        <button class="btn" onclick="startGame()">é–‹å§‹éŠæˆ²</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="progress">é¡Œç›®: 1 / 20</div>
        <div id="question-text">Word</div>
        <div id="options-container">
            </div>
    </div>

    <div id="result-screen" class="hidden">
        <h1>æ¸¬é©—çµæŸ!</h1>
        <div id="score-display">å¾—åˆ†: 0 / 0</div>
        <div id="final-message"></div>
        <button class="btn" onclick="location.reload()">Replay é‡ç©</button>
    </div>
</div>

<div class="footer">
    Designed by KLæ€è€ƒç ”ç©¶å®¤ (2025DEC)
</div>

<script>
    // å®Œæ•´çš„å–®å­—è³‡æ–™åº«
    const vocabData = [
        { s: 1, w: "balance", m: "å¹³è¡¡" },
        { s: 1, w: "bend", m: "å½æ›² / ä¿¯èº«" },
        { s: 1, w: "choke", m: "å“½å’½ / çª’æ¯ / å—†åˆ°" },
        { s: 1, w: "gesture", m: "åšæ‰‹å‹¢ / æ‰‹å‹¢" },
        { s: 1, w: "hold your breath", m: "å±ä½å‘¼å¸ / å¿æ°£" },
        { s: 1, w: "lean", m: "å€šé  / å‚¾æ–œ" },
        { s: 1, w: "nod", m: "é»é ­" },
        { s: 1, w: "pinch", m: "æ / æ" },
        { s: 1, w: "point", m: "æŒ‡ / æŒ‡å‘" },
        { s: 1, w: "punch", m: "æ®æ‹³ / é‡æ“Š" },
        { s: 1, w: "snore", m: "æ‰“é¼»é¼¾" },
        { s: 1, w: "stretch", m: "ä¼¸å±• / ä¼¸æ‡¶è…°" },
        { s: 1, w: "swallow", m: "ååš¥" },
        { s: 1, w: "twist", m: "æ‰­å‹• / æ‰­å‚·" },
        { s: 1, w: "wander", m: "å¾˜å¾Š / é–’é€›" },
        { s: 2, w: "bark", m: "å å« / å²è²å–Šå«" },
        { s: 2, w: "beg", m: "ä¹æ±‚ / æ‡‡æ±‚" },
        { s: 2, w: "cheer", m: "æ­¡å‘¼" },
        { s: 2, w: "clap", m: "æ‹æ‰‹ / é¼“æŒ" },
        { s: 2, w: "fidget", m: "åç«‹ä¸å®‰ / ç…©èº" },
        { s: 2, w: "frown", m: "çšºçœ‰" },
        { s: 2, w: "laugh", m: "ç¬‘ / å¤§ç¬‘" },
        { s: 2, w: "roar", m: "å’†å“® / å¼å«" },
        { s: 2, w: "scream", m: "å°–å«" },
        { s: 2, w: "shake your head", m: "æ–é ­" },
        { s: 2, w: "shout", m: "å¤§å« / å‘¼å–" },
        { s: 2, w: "sigh", m: "å˜†æ°£" },
        { s: 2, w: "sob", m: "å•œæ³£ / å—šå’½" },
        { s: 2, w: "whoop", m: "é«˜å–Š (æ­¡å‘¼)" },
        { s: 2, w: "yell", m: "å«å–Š / å¼å«" },
        { s: 3, w: "annoyed", m: "æƒ±æ€’çš„ / ç”Ÿæ°£çš„" },
        { s: 3, w: "guilty", m: "å…§ç–šçš„ / æœ‰ç½ªçš„" },
        { s: 3, w: "calm", m: "å¹³éœçš„ / å†·éœçš„" },
        { s: 3, w: "confident", m: "è‡ªä¿¡çš„" },
        { s: 3, w: "confused", m: "å›°æƒ‘çš„" },
        { s: 3, w: "contented", m: "æ»¿è¶³çš„ / æ»¿æ„çš„" },
        { s: 3, w: "curious", m: "å¥½å¥‡çš„" },
        { s: 3, w: "depressed", m: "æ²®å–ªçš„ / æŠ‘é¬±çš„" },
        { s: 3, w: "disappointed", m: "å¤±æœ›çš„" },
        { s: 3, w: "embarrassed", m: "å°·å°¬çš„" },
        { s: 3, w: "fearful", m: "ææ‡¼çš„ / å®³æ€•çš„" },
        { s: 3, w: "grateful", m: "æ„Ÿæ¿€çš„" },
        { s: 3, w: "hopeful", m: "å……æ»¿å¸Œæœ›çš„" },
        { s: 3, w: "jealous", m: "å«‰å¦’çš„" },
        { s: 3, w: "jolly", m: "å¿«æ´»çš„ / é«˜èˆˆçš„" },
        { s: 3, w: "joyful", m: "å¿«æ¨‚çš„" },
        { s: 3, w: "negative", m: "è² é¢çš„ / æ¶ˆæ¥µçš„" },
        { s: 3, w: "nervous", m: "ç·Šå¼µçš„" },
        { s: 3, w: "pride", m: "è‡ªè±ª / é©•å‚²" },
        { s: 3, w: "relaxed", m: "æ”¾é¬†çš„" },
        { s: 3, w: "relieved", m: "é‡‹æ‡·çš„ / é¬†äº†ä¸€å£æ°£çš„" },
        { s: 3, w: "smiley", m: "ç¬‘å˜»å˜»çš„ / å¾®ç¬‘çš„" },
        { s: 3, w: "stressed", m: "æ„Ÿåˆ°æœ‰å£“åŠ›çš„ / ç·Šå¼µçš„" },
        { s: 3, w: "unsettled", m: "ä¸å®‰çš„ / æœªå®šçš„" },
        { s: 3, w: "upset", m: "å¿ƒç…©æ„äº‚çš„ / é›£éçš„" },
        { s: 3, w: "worried", m: "æ“”å¿ƒçš„" },
        { s: 3, w: "burst out", m: "çªç„¶ç™¼ç”Ÿ / çªç„¶çˆ†ç™¼ (æƒ…ç·’)" },
        { s: 3, w: "cheer up", m: "æŒ¯ä½œèµ·ä¾† / ä½¿é«˜èˆˆ" },
        { s: 3, w: "distract", m: "åˆ†å¿ƒ / è½‰ç§»æ³¨æ„åŠ›" },
        { s: 3, w: "hold back", m: "æŠ‘åˆ¶ / é˜»æ“‹" },
        { s: 3, w: "rant and rave", m: "å’†å“® / å¤§ç™¼é›·éœ†" },
        { s: 3, w: "release", m: "é‡‹æ”¾ / ç™¼æ´©" },
        { s: 3, w: "roll your eyes", m: "ç¿»ç™½çœ¼" },
        { s: 3, w: "shiver", m: "é¡«æŠ– / å“†å—¦" },
        { s: 3, w: "shrug", m: "è³è‚©" },
        { s: 3, w: "suppress", m: "å£“æŠ‘ / é®å£“" },
        { s: 3, w: "at ease", m: "è‡ªåœ¨ / ä¸æ‹˜æŸ" },
        { s: 3, w: "despair", m: "çµ•æœ›" },
        { s: 3, w: "discouragement", m: "æ°£é¤’ / æŒ«æŠ˜" },
        { s: 3, w: "disgusted", m: "æ„Ÿåˆ°å™å¿ƒçš„ / å­æƒ¡çš„" },
        { s: 3, w: "eager", m: "æ¸´æœ›çš„ / ç†±åˆ‡çš„" },
        { s: 3, w: "ecstatic", m: "æ¬£å–œè‹¥ç‹‚çš„" },
        { s: 3, w: "effusive", m: "æ„Ÿæƒ…æ©«æº¢çš„ / éåˆ†ç†±æƒ…çš„" },
        { s: 3, w: "enthusiastic", m: "ç†±æƒ…çš„ / ç†±å¿ƒçš„" },
        { s: 3, w: "frustrated", m: "æ„Ÿåˆ°æŒ«æ•—çš„ / ç°å¿ƒçš„" },
        { s: 3, w: "hostile", m: "æ•µå°çš„ / æ‡·æœ‰æ•µæ„çš„" },
        { s: 3, w: "irritated", m: "è¢«æ¿€æ€’çš„ / æƒ±ç«çš„" },
        { s: 3, w: "pessimistic", m: "æ‚²è§€çš„" },
        { s: 3, w: "suspicious", m: "å¤šç–‘çš„ / å¯ç–‘çš„" },
        { s: 3, w: "terror", m: "ææ‡¼ / é©šé§­" }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let isAnswering = false;

    // æ´—ç‰Œå‡½æ•¸
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startGame() {
        try {
            // 1. ç²å–é¸å®šçš„ Sections
            const checkboxes = document.querySelectorAll('input[name="section"]:checked');
            let selectedSections = [];
            checkboxes.forEach((cb) => {
                selectedSections.push(parseInt(cb.value));
            });

            if (selectedSections.length === 0) {
                alert("è«‹è‡³å°‘é¸æ“‡ä¸€å€‹ Sectionï¼");
                return;
            }

            // 2. éæ¿¾å­—åº«
            let pool = vocabData.filter(item => selectedSections.includes(item.s));

            // 3. ç²å–é¡Œç›®æ•¸é‡
            const qCountInput = document.querySelector('input[name="qCount"]:checked');
            let maxQ = parseInt(qCountInput.value);

            if (pool.length === 0) {
                alert("æ‰€é¸ Section æ²’æœ‰å–®å­—è³‡æ–™ï¼");
                return;
            }

            // è‹¥å­—åº«å°‘æ–¼é¸æ“‡çš„é¡Œæ•¸ï¼Œå‰‡å…¨å‡º
            if (pool.length < maxQ) {
                maxQ = pool.length;
            }

            // 4. éš¨æ©Ÿé¸é¡Œ
            shuffle(pool);
            currentQuestions = pool.slice(0, maxQ);
            currentIndex = 0;
            score = 0;

            // 5. åˆ‡æ›ç•«é¢
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            
            showQuestion();
        } catch (e) {
            console.error("Game Error:", e);
            alert("éŠæˆ²ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ç¨‹å¼ç¢¼æ˜¯å¦å®Œæ•´è¤‡è£½ã€‚");
        }
    }

    function showQuestion() {
        isAnswering = true;
        const qData = currentQuestions[currentIndex];
        
        // æ›´æ–°é€²åº¦
        document.getElementById('progress').innerText = `é¡Œç›®: ${currentIndex + 1} / ${currentQuestions.length}`;
        document.getElementById('question-text').innerText = qData.w;

        // æº–å‚™é¸é … (1å€‹æ­£ç¢º + 3å€‹éŒ¯èª¤)
        let options = [{ text: qData.m, correct: true }];
        
        // éš¨æ©ŸæŠ½å–3å€‹éŒ¯èª¤é¸é … (å¾å®Œæ•´å­—åº«ä¸­æ’é™¤ç•¶å‰æ­£ç¢ºç­”æ¡ˆ)
        let distractors = vocabData.filter(v => v.m !== qData.m);
        shuffle(distractors);
        for(let i=0; i<3; i++) {
            if(distractors[i]) {
                options.push({ text: distractors[i].m, correct: false });
            }
        }
        
        shuffle(options);

        // æ¸²æŸ“æŒ‰éˆ•
        const container = document.getElementById('options-container');
        container.innerHTML = ''; // æ¸…ç©ºèˆŠæŒ‰éˆ•
        
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt.text;
            btn.onclick = () => checkAnswer(btn, opt.correct);
            container.appendChild(btn);
        });
    }

    function checkAnswer(btn, isCorrect) {
        if (!isAnswering) return; // é˜²æ­¢é‡è¤‡é»æ“Š
        isAnswering = false;

        const allBtns = document.querySelectorAll('.option-btn');
        
        if (isCorrect) {
            btn.classList.add('correct');
            score++;
        } else {
            btn.classList.add('wrong');
            // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆ
            allBtns.forEach(b => {
                if (b.innerText === currentQuestions[currentIndex].m) {
                    b.classList.add('correct');
                }
            });
        }

        // å»¶é²å¾Œé€²å…¥ä¸‹ä¸€é¡Œ
        setTimeout(() => {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                showQuestion();
            } else {
                endGame();
            }
        }, 1500); // 1.5ç§’å¾Œä¸‹ä¸€é¡Œ
    }

    function endGame() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        
        const percentage = Math.round((score / currentQuestions.length) * 100);
        document.getElementById('score-display').innerText = `å¾—åˆ†: ${score} / ${currentQuestions.length} (${percentage}%)`;
        
        let msg = "";
        if (percentage === 100) msg = "å¤ªæ£’äº†ï¼å…¨éƒ¨ç­”å°ï¼ğŸ‰";
        else if (percentage >= 80) msg = "åšå¾—å¾ˆå¥½ï¼ç¹¼çºŒä¿æŒï¼ğŸ‘";
        else if (percentage >= 60) msg = "åŠæ ¼äº†ï¼Œå†æ¥å†å²ï¼ğŸ’ª";
        else msg = "åˆ¥ç°å¿ƒï¼Œå¤šç·´ç¿’å¹¾æ¬¡å°±æœƒäº†ï¼ğŸ“š";
        
        document.getElementById('final-message').innerText = msg;
    }
</script>

</body>
</html>